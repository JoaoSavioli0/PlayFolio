{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nexport default {\n  name: \"Destaque\",\n  data() {\n    return {\n      jogosDestaque: [],\n      capasJogos: {},\n      genreIds: [],\n      genresNomes: {}\n    };\n  },\n  mounted() {\n    this.carregaJogosDestaque();\n  },\n  methods: {\n    async carregaJogosDestaque() {\n      const body = `\n      fields game_id; sort value desc; limit 10; where popularity_type = 1;\n      `;\n      try {\n        const response = await axios.post(\"/v4/popularity_primitives\", body, {\n          headers: {\n            'Accept': 'application/json',\n            'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n            'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n            'Content-Type': 'text/plain'\n          }\n        });\n        let jogosDestaqueId = response.data;\n        jogosDestaqueId = jogosDestaqueId.map(e => e.game_id);\n        this.jogosDestaque = await this.encontraJogos(jogosDestaqueId);\n        await this.carregaTags(this.jogosDestaque);\n      } catch (error) {\n        console.error(\"Erro: \" + error);\n      }\n    },\n    async encontraJogos(jogosId) {\n      const body = `fields *; where id = (${jogosId.join(', ')});`;\n      try {\n        const response = await axios.post(\"/v4/games\", body, {\n          headers: {\n            'Accept': 'application/json',\n            'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n            'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n            'Content-Type': 'text/plain'\n          }\n        });\n        await this.carregaCapas(jogosId);\n        return response.data;\n      } catch (error) {\n        console.error(\"Erro: \" + error);\n      }\n    },\n    async carregaCapas(jogosId) {\n      const requests = jogosId.map(async id => {\n        const body = `fields url; where game = ${id}; limit 1;`;\n        try {\n          const response = await axios.post(\"/v4/covers\", body, {\n            headers: {\n              'Accept': 'application/json',\n              'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n              'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n              'Content-Type': 'text/plain'\n            }\n          });\n          let imagem = response.data[0];\n          if (imagem && imagem.url) {\n            this.capasJogos[id] = imagem.url.replace(\"thumb\", \"720p\");\n          }\n        } catch (error) {\n          console.error(\"Erro carregando imagem: \" + error);\n        }\n      });\n      await Promise.all(requests);\n    },\n    async carregaTags(jogos) {\n      for (let jogo of jogos) {\n        for (let genreId of jogo.genres) {\n          if (!this.genreIds.includes(genreId)) {\n            this.genreIds.push(genreId);\n          }\n        }\n      }\n      const body = `fields name; where id = (${this.genreIds.join(\", \")});`;\n      try {\n        const response = await axios.post(\"/v4/genres\", body, {\n          headers: {\n            'Accept': 'application/json',\n            'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n            'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n            'Content-Type': 'text/plain'\n          }\n        });\n        for (let data of response.data) {\n          this.genresNomes[data.id] = data.name;\n        }\n      } catch (error) {\n        console.error(\"Erro carregando generos: \" + error);\n      }\n      console.log(\"genreNomes: \" + this.genresNomes);\n    },\n    formataDataUnix(dataUnix) {\n      const timestamp = dataUnix;\n      const data = new Date(timestamp * 1000);\n      const options = {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric'\n      };\n      return data.toLocaleString('pt-BR', options);\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","jogosDestaque","capasJogos","genreIds","genresNomes","mounted","carregaJogosDestaque","methods","body","response","post","headers","jogosDestaqueId","map","e","game_id","encontraJogos","carregaTags","error","console","jogosId","join","carregaCapas","requests","id","imagem","url","replace","Promise","all","jogos","jogo","genreId","genres","includes","push","log","formataDataUnix","dataUnix","timestamp","Date","options","day","month","year","toLocaleString"],"sources":["C:\\Users\\joao.savioli\\Desktop\\Playfolio project\\playfolio-frontend\\src\\components\\DestaqueComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"w-full px-24\" v-if=\"jogosDestaque.length\">\r\n        <div class=\"flex w-full items-center\">\r\n            <div class=\"whitespace-nowrap\">\r\n                <h2 class=\"text-3xl text-start text-zinc-50\">DESTAQUES</h2>\r\n            </div>\r\n        </div>\r\n        <div class=\"w-full flex gap-x-8 mt-4 overflow-x-scroll py-2\">\r\n\r\n            <div class=\"relative group\" v-for=\"jogo in jogosDestaque\" :key=\"jogo.id\">\r\n\r\n                <div\r\n                    class=\"h-[320px] w-[200px] clip-card bg-[#262729] flex flex-col shrink-0 relative card-area rounded-xl overflow-hidden border-[1px] border-zinc-600\">\r\n\r\n                    <div class=\"w-full h-[200px] relative overflow-hidden relative image-area z-40\">\r\n                        <img :src=\"capasJogos[jogo.id]\" alt=\"\">\r\n                        <div class=\"w-full h-full absolute gradiente-card top-0\"></div>\r\n\r\n                        <div class=\"end-0 top-0 px-[10px] py-[4px] justify-center flex absolute shrink-0 items-center bg-[#1A1B1E] z-50 rounded-bl-xl border-l-[1px] border-b-[1px] border-zinc-600 shadow-lg\"\r\n                            v-if=\"jogo.rating\">\r\n                            <img src=\"../assets/star.png\" class=\"size-[12px]\">\r\n                            <span class=\"ml-2 text-xs\">{{ (jogo.rating / 10).toFixed(1) }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"w-full h-[150px] px-4 py-2 flex flex-col justify-between pb-4 text-area transition-all\">\r\n                        <div>\r\n                            <span\r\n                                class=\"text-start text-zinc-50 text-sm font-medium line-clamp-2 break-words hyphens-auto\">\r\n                                {{ jogo.name }}</span>\r\n                            <div v-if=\"jogo.genres\" class=\"text-start w-full line-clamp-2 text-zinc-500 leading-[0.75]\">\r\n                                <span v-for=\"(genreId, index) in jogo.genres\" :key=\"genreId\" class=\"text-[10px] \">{{\r\n                                    genresNomes[genreId] == \"Role-playing (RPG)\" ? \"RPG\" : genresNomes[genreId]\r\n                                    }}<span v-if=\"index !== jogo.genres.length - 1\">, </span></span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"w-full relative\">\r\n                            <div class=\"flex items-center\">\r\n                                <img src=\"../assets/calendario.svg\" class=\"w-[18px] h-auto filtro-cinza\">\r\n\r\n                                <span class=\"text-[10px] text-zinc-500 ml-2\" v-if=\"jogo.first_release_date\">{{\r\n                                    formataDataUnix(jogo.first_release_date) }}</span>\r\n                            </div>\r\n\r\n\r\n                            <button\r\n                                class=\"w-full border-2 border-zinc-500 rounded-xl cursor-pointer opacity-0 absolute translate-y-[5px] group-hover:opacity-100 group-hover:-translate-y-[40px] hover:-translate-y-[44px] transition-all duration-300\"><span\r\n                                    class=\"text-zinc-300 text-xs\">QUERO JOGAR</span></button>\r\n                            <button\r\n                                class=\"w-full border-2 border-zinc-500 rounded-xl cursor-pointer shadow-sm hover:-translate-y-[4px] transition-all peer\">\r\n                                <span class=\"text-zinc-200 text-xs py-[8px] peer:hover:text-white\">J√Å JOGUEI</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: \"Destaque\",\r\n    data() {\r\n        return {\r\n            jogosDestaque: [],\r\n            capasJogos: {},\r\n            genreIds: [],\r\n            genresNomes: {}\r\n        }\r\n    },\r\n    mounted() {\r\n        this.carregaJogosDestaque()\r\n    },\r\n    methods: {\r\n        async carregaJogosDestaque() {\r\n            const body = `\r\n      fields game_id; sort value desc; limit 10; where popularity_type = 1;\r\n      `;\r\n\r\n            try {\r\n                const response = await axios.post(\"/v4/popularity_primitives\", body, {\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\r\n                        'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\r\n                        'Content-Type': 'text/plain'\r\n                    }\r\n                })\r\n                let jogosDestaqueId = response.data\r\n                jogosDestaqueId = jogosDestaqueId.map(e => e.game_id)\r\n                this.jogosDestaque = await this.encontraJogos(jogosDestaqueId)\r\n\r\n                await this.carregaTags(this.jogosDestaque)\r\n\r\n            } catch (error) {\r\n                console.error(\"Erro: \" + error)\r\n            }\r\n\r\n        },\r\n        async encontraJogos(jogosId) {\r\n            const body = `fields *; where id = (${jogosId.join(', ')});`\r\n\r\n            try {\r\n                const response = await axios.post(\"/v4/games\", body, {\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\r\n                        'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\r\n                        'Content-Type': 'text/plain'\r\n                    }\r\n                })\r\n                await this.carregaCapas(jogosId)\r\n\r\n                return response.data\r\n            } catch (error) {\r\n                console.error(\"Erro: \" + error)\r\n            }\r\n\r\n        },\r\n\r\n        async carregaCapas(jogosId) {\r\n            const requests = jogosId.map(async (id) => {\r\n                const body = `fields url; where game = ${id}; limit 1;`\r\n                try {\r\n                    const response = await axios.post(\"/v4/covers\", body, {\r\n                        headers: {\r\n                            'Accept': 'application/json',\r\n                            'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\r\n                            'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\r\n                            'Content-Type': 'text/plain'\r\n                        }\r\n                    })\r\n                    let imagem = response.data[0]\r\n                    if (imagem && imagem.url) {\r\n                        this.capasJogos[id] = imagem.url.replace(\"thumb\", \"720p\")\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Erro carregando imagem: \" + error)\r\n                }\r\n            })\r\n\r\n            await Promise.all(requests)\r\n        },\r\n\r\n        async carregaTags(jogos) {\r\n            for (let jogo of jogos) {\r\n                for (let genreId of jogo.genres) {\r\n                    if (!this.genreIds.includes(genreId)) {\r\n                        this.genreIds.push(genreId)\r\n                    }\r\n                }\r\n            }\r\n\r\n            const body = `fields name; where id = (${this.genreIds.join(\", \")});`\r\n            try {\r\n                const response = await axios.post(\"/v4/genres\", body, {\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\r\n                        'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\r\n                        'Content-Type': 'text/plain'\r\n                    }\r\n                })\r\n\r\n                for (let data of response.data) {\r\n                    this.genresNomes[data.id] = data.name\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error(\"Erro carregando generos: \" + error)\r\n            }\r\n            console.log(\"genreNomes: \" + this.genresNomes)\r\n        },\r\n\r\n        formataDataUnix(dataUnix) {\r\n            const timestamp = dataUnix;\r\n            const data = new Date(timestamp * 1000);\r\n            const options = { day: '2-digit', month: '2-digit', year: 'numeric' };\r\n            return data.toLocaleString('pt-BR', options)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.gradiente-card {\r\n    background: rgb(38, 39, 41);\r\n    background: linear-gradient(0deg, rgba(38, 39, 41, 1) 0%, rgba(0, 0, 0, 0) 51%);\r\n}\r\n\r\n.card-area:hover .text-area {\r\n    height: 300px;\r\n    transition: all;\r\n    transition-duration: 300ms;\r\n}\r\n\r\n.card-area:hover .button-quero {\r\n    opacity: 1;\r\n    transition-duration: 300ms;\r\n    transform: translateY(-50px)\r\n}\r\n\r\n.filtro-branco {\r\n    filter: brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(0%) hue-rotate(168deg) brightness(103%) contrast(103%);\r\n}\r\n\r\n.filtro-cinza {\r\n    filter: brightness(0) saturate(100%) invert(14%) sepia(6%) saturate(353%) hue-rotate(182deg) brightness(93%) contrast(96%);\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}