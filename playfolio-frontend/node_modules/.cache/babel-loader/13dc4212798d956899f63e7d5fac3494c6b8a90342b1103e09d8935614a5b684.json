{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nexport default {\n  name: 'HomeView',\n  data() {\n    return {\n      jogosDestaque: [],\n      capasJogos: {}\n    };\n  },\n  mounted() {\n    this.carregaJogosDestaque();\n  },\n  methods: {\n    async carregaJogosDestaque() {\n      const body = `\n      fields game_id; sort value desc; limit 10; where popularity_type = 1;\n      `;\n      try {\n        const response = await axios.post(\"/v4/popularity_primitives\", body, {\n          headers: {\n            'Accept': 'application/json',\n            'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n            'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n            'Content-Type': 'text/plain'\n          }\n        });\n        let jogosDestaqueId = response.data;\n        jogosDestaqueId = jogosDestaqueId.map(e => e.game_id);\n        this.jogosDestaque = await this.encontraJogos(jogosDestaqueId);\n      } catch (error) {\n        console.error(\"Erro: \" + error);\n      }\n    },\n    async encontraJogos(jogosId) {\n      const body = `fields *; limit 10; where id = (${jogosId.join(', ')});`;\n      try {\n        const response = await axios.post(\"/v4/games\", body, {\n          headers: {\n            'Accept': 'application/json',\n            'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n            'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n            'Content-Type': 'text/plain'\n          }\n        });\n        console.log(\"Jogos destaque: \" + response.data);\n        return response.data;\n      } catch (error) {\n        console.error(\"Erro: \" + error);\n      }\n    },\n    async carregaCapas(jogosId) {\n      const requests = this.jogosId.map(async id => {\n        const body = `fields url; where game = ${id}; limit 1;`;\n        try {\n          const response = await axios.post(\"/v4/covers\", body, {\n            headers: {\n              'Accept': 'application/json',\n              'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n              'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n              'Content-Type': 'text/plain'\n            }\n          });\n          let imagem = response.data[0];\n          if (imagem && imagem.url) {\n            this.capasJogos[id] = imagem.url;\n          }\n        } catch (error) {\n          console.error(\"Erro carregando imagem: \" + error);\n        }\n      });\n      await Promise.all(requests);\n    }\n  },\n  watch: {\n    jogosDestaque(newValue) {\n      if (newValue) {\n        this.carregaCapas(this.jogosDestaque);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","jogosDestaque","capasJogos","mounted","carregaJogosDestaque","methods","body","response","post","headers","jogosDestaqueId","map","e","game_id","encontraJogos","error","console","jogosId","join","log","carregaCapas","requests","id","imagem","url","Promise","all","watch","newValue"],"sources":["C:\\Users\\joao.savioli\\Desktop\\Playfolio project\\playfolio-frontend\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"w-full\">\n    <h2 class=\"text-3xl text-start\">Em destaque</h2>\n    <div class=\"w-full flex gap-x-4 mt-4 overflow-x-scroll \">\n\n      <div class=\"h-[350px] w-[250px] rounded-xl bg-[#172573] flex flex-col overflow-hidden shrink-0 relative\"\n        v-for=\"jogo in jogosDestaque\">\n\n        <div class=\"w-full h-[160px] relative overflow-hidden\">\n          <img :src=\"capaJogo(jogo.id)\" alt=\"\">\n          <div class=\"w-full h-full absolute gradiente-card top-0\"></div>\n        </div>\n\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n\n  name: 'HomeView',\n  data() {\n    return {\n      jogosDestaque: [],\n      capasJogos: {}\n    }\n  },\n  mounted() {\n    this.carregaJogosDestaque()\n  },\n  methods: {\n    async carregaJogosDestaque() {\n      const body = `\n      fields game_id; sort value desc; limit 10; where popularity_type = 1;\n      `;\n\n      try {\n        const response = await axios.post(\"/v4/popularity_primitives\", body, {\n          headers: {\n            'Accept': 'application/json',\n            'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n            'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n            'Content-Type': 'text/plain'\n          }\n        })\n        let jogosDestaqueId = response.data\n        jogosDestaqueId = jogosDestaqueId.map(e => e.game_id)\n        this.jogosDestaque = await this.encontraJogos(jogosDestaqueId)\n\n      } catch (error) {\n        console.error(\"Erro: \" + error)\n      }\n\n    },\n    async encontraJogos(jogosId) {\n      const body = `fields *; limit 10; where id = (${jogosId.join(', ')});`\n\n      try {\n        const response = await axios.post(\"/v4/games\", body, {\n          headers: {\n            'Accept': 'application/json',\n            'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n            'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n            'Content-Type': 'text/plain'\n          }\n        })\n        console.log(\"Jogos destaque: \" + response.data)\n        return response.data\n\n      } catch (error) {\n        console.error(\"Erro: \" + error)\n      }\n\n    },\n\n    async carregaCapas(jogosId) {\n\n      const requests = this.jogosId.map(async (id) => {\n\n        const body = `fields url; where game = ${id}; limit 1;`\n        try {\n          const response = await axios.post(\"/v4/covers\", body, {\n            headers: {\n              'Accept': 'application/json',\n              'Client-ID': \"i79ndcjylui2396ezi2v752sc9dze0\",\n              'Authorization': `Bearer h6v8ywcqhwyyhj140u70v95rss6sga`,\n              'Content-Type': 'text/plain'\n            }\n          })\n          let imagem = response.data[0]\n          if (imagem && imagem.url) {\n            this.capasJogos[id] = imagem.url\n          }\n        } catch (error) {\n          console.error(\"Erro carregando imagem: \" + error)\n        }\n      })\n\n      await Promise.all(requests)\n    }\n  },\n  watch: {\n    jogosDestaque(newValue) {\n      if (newValue) {\n        this.carregaCapas(this.jogosDestaque)\n      }\n    }\n  }\n}\n</script>\n\n<style>\n.gradiente-card {\n  background: rgb(23, 37, 115);\n  background: linear-gradient(0deg, rgba(23, 37, 115, 1) 0%, rgba(0, 0, 0, 0) 51%);\n}\n</style>\n"],"mappings":";;AAoBA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EAEbC,IAAI,EAAE,UAAU;EAChBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,aAAa,EAAE,EAAE;MACjBC,UAAU,EAAE,CAAC;IACf;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,oBAAoB,CAAC;EAC5B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,oBAAoBA,CAAA,EAAG;MAC3B,MAAME,IAAG,GAAI;;OAEZ;MAED,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMT,KAAK,CAACU,IAAI,CAAC,2BAA2B,EAAEF,IAAI,EAAE;UACnEG,OAAO,EAAE;YACP,QAAQ,EAAE,kBAAkB;YAC5B,WAAW,EAAE,gCAAgC;YAC7C,eAAe,EAAE,uCAAuC;YACxD,cAAc,EAAE;UAClB;QACF,CAAC;QACD,IAAIC,eAAc,GAAIH,QAAQ,CAACP,IAAG;QAClCU,eAAc,GAAIA,eAAe,CAACC,GAAG,CAACC,CAAA,IAAKA,CAAC,CAACC,OAAO;QACpD,IAAI,CAACZ,aAAY,GAAI,MAAM,IAAI,CAACa,aAAa,CAACJ,eAAe;MAE/D,EAAE,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,QAAO,GAAIA,KAAK;MAChC;IAEF,CAAC;IACD,MAAMD,aAAaA,CAACG,OAAO,EAAE;MAC3B,MAAMX,IAAG,GAAI,mCAAmCW,OAAO,CAACC,IAAI,CAAC,IAAI,CAAC,IAAG;MAErE,IAAI;QACF,MAAMX,QAAO,GAAI,MAAMT,KAAK,CAACU,IAAI,CAAC,WAAW,EAAEF,IAAI,EAAE;UACnDG,OAAO,EAAE;YACP,QAAQ,EAAE,kBAAkB;YAC5B,WAAW,EAAE,gCAAgC;YAC7C,eAAe,EAAE,uCAAuC;YACxD,cAAc,EAAE;UAClB;QACF,CAAC;QACDO,OAAO,CAACG,GAAG,CAAC,kBAAiB,GAAIZ,QAAQ,CAACP,IAAI;QAC9C,OAAOO,QAAQ,CAACP,IAAG;MAErB,EAAE,OAAOe,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,QAAO,GAAIA,KAAK;MAChC;IAEF,CAAC;IAED,MAAMK,YAAYA,CAACH,OAAO,EAAE;MAE1B,MAAMI,QAAO,GAAI,IAAI,CAACJ,OAAO,CAACN,GAAG,CAAC,MAAOW,EAAE,IAAK;QAE9C,MAAMhB,IAAG,GAAI,4BAA4BgB,EAAE,YAAW;QACtD,IAAI;UACF,MAAMf,QAAO,GAAI,MAAMT,KAAK,CAACU,IAAI,CAAC,YAAY,EAAEF,IAAI,EAAE;YACpDG,OAAO,EAAE;cACP,QAAQ,EAAE,kBAAkB;cAC5B,WAAW,EAAE,gCAAgC;cAC7C,eAAe,EAAE,uCAAuC;cACxD,cAAc,EAAE;YAClB;UACF,CAAC;UACD,IAAIc,MAAK,GAAIhB,QAAQ,CAACP,IAAI,CAAC,CAAC;UAC5B,IAAIuB,MAAK,IAAKA,MAAM,CAACC,GAAG,EAAE;YACxB,IAAI,CAACtB,UAAU,CAACoB,EAAE,IAAIC,MAAM,CAACC,GAAE;UACjC;QACF,EAAE,OAAOT,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,0BAAyB,GAAIA,KAAK;QAClD;MACF,CAAC;MAED,MAAMU,OAAO,CAACC,GAAG,CAACL,QAAQ;IAC5B;EACF,CAAC;EACDM,KAAK,EAAE;IACL1B,aAAaA,CAAC2B,QAAQ,EAAE;MACtB,IAAIA,QAAQ,EAAE;QACZ,IAAI,CAACR,YAAY,CAAC,IAAI,CAACnB,aAAa;MACtC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}